!function(){"use strict";!function(){var a=document.getElementsByTagName("head")[0],b='.tangible-object{cursor:default;color:#4d4d4d;background:#fff}.tangible-object ::-moz-selection{background:#d6d6d6;text-shadow:none}.tangible-object ::selection{background:#d6d6d6;text-shadow:none}.ellipsis,.count{color:#8e908c}.quote,.string,.key{color:#718c00}.regex{color:#c82829}.boolean{color:#f5871f}.number{color:#f5871f}.null{color:#f5871f}.undefined{color:#f5871f}.tangible-object{font-family:Consolas,monaco,monospace;font-size:14px}.entry-block{display:block;padding-left:15px;margin-left:-15px;position:relative}.entry-list{display:block;padding-left:16px;border-left:1px dotted #bbb;margin-left:2px}.entry.empty>.icon-arrow,.entry.empty>.value>.entry-list,.entry.empty>.value>.ellipsis{display:none}.count{display:none}.collapsed>.count{display:inline}.collapsed>.entry>.value>.entry-list{display:none}.collapsed>.entry>.value>.ellipsis{margin:0 2px}.collapsed>.entry>.value>.ellipsis:after{content:"…"}.entry-block:last-child>.comma{display:none}.icon-arrow{width:20px;height:18px;position:absolute;left:-2px;top:-1px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD1JREFUeNpiYGBgOADE%2F3Hgw0DM4IRHgSsDFOzFInmMAQnY49ONzZRjDFiADT7dMLALiE8y4AGW6LoBAgwAuIkf%2F%2FB7O9sAAAAASUVORK5CYII%3D);background-repeat:no-repeat;background-position:center center;display:block;opacity:.15;cursor:pointer}.collapsed>.entry>.icon-arrow{-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg);width:18px;height:20px;left:0;top:-3px}',c=document.createElement("style"),d=document.createTextNode("");c.type="text/css",d.nodeValue=b,c.appendChild(d),a.appendChild(c)}();var a={slice:function(a){return Array.prototype.slice.call(a,0)},capitalize:function(a){return a.substr(0,1).toUpperCase()+a.substr(1,a.length-1)},partial:function(b,c){return function(){var d=a.slice(arguments);return d.unshift(c),b.apply(this,d)}},each:function(a,b,c){var d,e,f=function(){b.apply(c,arguments)};if(a.length===+a.length)for(d=0,e=a.length;e>d;d++)f(a[d],d,a);else{var g=Object.keys(a);for(d=0,e=g.length;e>d;d++)f(a[g[d]],g[d],a)}return a}},b={fragment:function(){return document.createDocumentFragment()},template:function(a){return j[a].cloneNode(!0)},createEl:function(a,c,d){a=a||"span";var e=i[a].cloneNode(!1);return c&&(e.className=c),e=b.setText(e,d)},setText:function(a,c){if(!c||""===c)return a;var d=i.text.cloneNode(!1);return d.nodeValue=c,b.append(a,d)},append:function(){var c=Array.prototype.shift.call(arguments);return a.each(arguments,function(a){a&&(a.constructor===Array?b.append.apply(this,[c].concat(a)):c.appendChild(a))}),c},empty:function(a){a.innerHTML=""},replace:function(a,b){a.parentNode.replaceChild(b,a)},remove:function(a){a.parentNode.removeChild(a)},childByClass:function(b,c){var d,e=b.children;return a.each(e,function(a){a.className===c&&(d=a)}),d},wrap:function(a,c,d){return b.append(a,b.template(d),c,b.template(d))}},c={normalizePath:function(a){return"/"===a?"/":a+"/"},parentPath:function(a){var b=a.split("/");return b.pop(),b.join("/")||"/"},keyFromPath:function(a){var b=a.split("/");return b.pop()}},d={type:function(a){return"undefined"==typeof a?"undefined":null===a?"null":"string"==typeof a?"string":"number"==typeof a?"number":"boolean"==typeof a?"boolean":a instanceof RegExp?"regex":a instanceof Array?"array":"object"},isNumeric:function(a){return!isNaN(a)},isEmpty:function(b){if(d.isList(b)){var c=0;return a.each(b,function(){return c++}),c?!1:!0}},length:function(a){return d.isList(a)?a.length?a.length:Object.keys(a).length:void 0},isList:function(a){var b=d.type(a);return"object"===b||"array"===b}},e={render:function(a,c){var d=e.buildObjEl(a,void 0,void 0,c);return b.append(b.createEl("div","tangible-object"),d)},buildObjEl:function(a,c,f,g){f="/"!==f?f+"/":f,f=void 0!==c?f+c:"",f=f||"/";var h,i=d.type(a),j=b.createEl("span","entry-block"),k=e.buildWrapper(a),l=e.buildArrow(a,c,i),m=e.buildKey(a,c,i),n=e.buildValue(a,c,i,f,g),o=b.template("comma"),p=d.length(a);void 0!==p&&(h=b.createEl("span","count",e.lengthString(p)));var q={entryNode:k,arrowNode:l,valueNode:n,keyNode:m,type:i,value:a,countNode:h};return g[f]=q,k=b.append(k,l,m,n),j=b.append(j,k,o,h)},buildWrapper:function(a){var c=d.isEmpty(a)?"entry empty":"entry",e=b.createEl("span",c);return e},buildArrow:function(a){return d.isList(a)?b.template("arrow"):void 0},buildKey:function(a,c){if(void 0!==c&&!d.isNumeric(c)){var e=b.createEl("span","key"),f=b.template("key");return f=b.setText(f,c),e=b.wrap(e,f,"quote"),e=b.append(e,b.template("sep"))}},buildValue:function(c,f,g,h,i){var j=b.createEl("span","value");g=g||d.type(c);var k,l="build"+a.capitalize(g)+"Dom";return"function"==typeof e[l]&&(k=e[l](c,f,g,h,i)),j=b.append(j,k)},buildStringDom:function(a){var c=b.fragment(),d=JSON.stringify(a);d=d.substring(1,d.length-1);var e=b.template("string");return e=b.setText(e,d),c=b.wrap(c,e,"quote")},buildNullDom:function(){return e._buildFlatValue.apply(this,arguments)},buildUndefinedDom:function(){return e._buildFlatValue.apply(this,arguments)},buildNumberDom:function(){return e._buildFlatValue.apply(this,arguments)},buildRegexDom:function(){return e._buildFlatValue.apply(this,arguments)},buildBooleanDom:function(){return e._buildFlatValue.apply(this,arguments)},_buildFlatValue:function(a,c,d){var e=String(a);return null===a?e="null":void 0===a&&(e="undefined"),b.createEl("span",d,e)},buildObjectDom:function(){return e._buildListValue.apply(this,arguments)},buildArrayDom:function(){return e._buildListValue.apply(this,arguments)},_buildListValue:function(c,d,f,g,h){var i="array"===f?"bracket":"brace",j=b.fragment();j=b.append(j,b.template(i+"Open"),b.template("ellipsis"));var k,l=b.template("entryList");return a.each(c,function(a,c){k=e.buildObjEl(a,c,g,h),l=b.append(l,k)}),j=b.append(j,l,b.template(i+"Close"))},lengthString:function(a){var b=1===a?"":"s";return" // "+a+" item"+b}},f={updateFromDiff:function(b,c){a.each(c,function(a){f[a.op](a.path,a.value,b)})},replace:function(a,d,g){f.removeChildren(a,g);var h=c.keyFromPath(a),i=g[a].entryNode.parentNode,j=c.parentPath(a),k=e.buildObjEl(d,h,j,g);b.replace(i,k)},add:function(a,g,h){var i=c.parentPath(a),j=h[i],k=j.valueNode,l=b.childByClass(k,"entry-list"),m=c.keyFromPath(a),n=d.isNumeric(m);m=n?!1:m;var o=e.buildObjEl(g,m,i,h);l=b.append(l,o),f.checkParents(a,h)},remove:function(a,c,d){f.removeChildren(a,d);var e=d[a].entryNode.parentNode;b.remove(e),delete d[a],f.checkParents(a,d)},checkParents:function(a,b){var d=c.parentPath(a),g=f.immediateChildren(d,b).length,h=b[d];h.countNode.innerHTML=e.lengthString(g),g?h.entryNode.className="entry":f.convertToEmpty(h)},convertToEmpty:function(a){a.entryNode.className+=" empty"},allChildren:function(b,d){b=c.normalizePath(b);var e=b.length,f=[];return a.each(d,function(a,c){c.substr(0,e)===b&&c!==b&&f.push(c)}),f},immediateChildren:function(b,d){var e=f.allChildren(b,d);b=c.normalizePath(b);var g=[];return a.each(e,function(a){1===a.substr(b.length).split("/").length&&g.push(a)}),g},removeChildren:function(b,c){var d=f.allChildren(b,c);a.each(d,function(a){delete c[a]})}},g=-1!==navigator.platform.indexOf("Mac")?"metaKey":"ctrlKey",h={clickHandler:function(b){if(1===b.which){var c=b.target;if("icon-arrow"===c.className){b.preventDefault();var d=c.parentNode,e=b[g]?a.slice(d.parentNode.parentNode.children):d.parentNode,f=d.parentNode.classList.contains("collapsed")?!0:!1;return void h.toggle(e,f)}}},toggle:function(a,b){var c=[];a instanceof Array?c=a:c.push(a),b&&c.length?h.expand(c):h.collapse(c)},collapse:function(b){a.each(b,function(a){a.classList.add("collapsed")})},expand:function(b){a.each(b,function(a){a.classList.remove("collapsed")})}},i={text:document.createTextNode(""),span:document.createElement("span"),div:document.createElement("div"),pre:document.createElement("pre")},j={arrow:b.createEl("span","icon-arrow"),number:b.createEl("span","number"),string:b.createEl("span","string"),key:b.createEl("span","key"),empty:b.createEl("span","null"),innerBlock:b.createEl("span","inner-block"),entryList:b.createEl("span","entry-list"),quote:b.createEl("span","quote",'"'),bracketOpen:b.createEl("span","bracket bracket-open","["),bracketClose:b.createEl("span","bracket bracket-close","]"),braceOpen:b.createEl("span","brace brace-open","{"),braceClose:b.createEl("span","brace brace-close","}"),ellipsis:b.createEl("span","ellipsis"),comma:b.createEl("span","comma",","),sep:b.createEl("span","sep",": ")},k=function(a){this._obj=a,this._els=[],this._observers=[]},l=k.prototype;l.render=function(b){var c={},d=a.partial(f.updateFromDiff,c),g=jsonpatch.observe(this._obj,d),h=e.render(this._obj,c);b.appendChild(h),this._els.push(b),this._observers.push(g)},l.destroy=function(){a.each(this._els,b.empty),this._els=[],a.each(this._observers,this._unobserve,this),this._observers=[],delete this._obj},l._unobserve=function(a){jsonpatch.unobserve(this._obj,a)},k.stopListening=function(){n.destroy()};var m=function(){document.addEventListener("click",h.clickHandler,!1)};m.prototype.destroy=function(){document.removeEventListener("click",h.clickHandler,!1)};var n=new m;window.Tangible=k}(jsonpatch);